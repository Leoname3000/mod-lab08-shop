add_executable(${PROJECT_NAME}.test
  AllTests.cpp
  tests.cpp)

target_link_libraries(${PROJECT_NAME}.test
  ${PROJECT_NAME}_1 ${PROJECT_NAME}_2 ${PROJECT_NAME}_3 gtest pthread)
target_compile_definitions(${PROJECT_NAME}.test 
  PRIVATE TEST_DIR="${CMAKE_CURRENT_LIST_DIR}/test")

install(TARGETS ${PROJECT_NAME}.test
        DESTINATION "${tool_dest}")

#Add the google test subdirectory
add_subdirectory("${CMAKE_CURRENT_LIST_DIR}/googletest")

#include googletest/include dir
include_directories("${CMAKE_CURRENT_LIST_DIR}/googletest/googletest/include")

#include the googlemock/include dir
include_directories("${CMAKE_CURRENT_LIST_DIR}/googletest/googlemock/include")